<!DOCTYPE html>
<html>

<head>
  <meta charset='utf-8' />
  <title></title>
  <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=yes' />
  <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.49.0/mapbox-gl.js'></script>
  <script type="text/javascript" src='https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js'></script>
  <script type="text/javascript" src='https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js'></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel='stylesheet' />
  <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.49.0/mapbox-gl.css' rel='stylesheet' />
  <link rel="stylesheet" href="styles.css">
</head>

<body>

  <!-- Uses the spotsApp from app.js etc to find listings -->
  <div ng-app="spotsApp" ng-controller="SpotsController">

    <!-- Header -->
    <div class="row">
      <table>
        <tr>
          <th>
            <img src="images/placeholder_logo.png" alt="logo" style="width:75px;height:60px">
          </th>
          <th>
            <h1>Study Spots </h1>
          </th>
          <th>
            <img src="images/campus.jpg" alt="campus" style="width:150px;height:60px">
          </th>
          <th>
            <img src="images/century.jpg" alt="century" style="width:150px;height:60px">
          </th>
        </tr>
      </table>
    </div>


    <!--Menu sidebar -->
    <div id="myMenu" class="sidebar" style="width: 0px;">

      <!-- Search bar -->
      <input type="search" name="q" size="31" placeholder="Search for building" ng-model="spotQuery">

      <!-- Table for the building listings 
        <!-- Creates container div element for the spots listing in the sidebar 
        <div id="spotsList" class="container" >
          <div id="sidebar-heading" class="row" style="color: #000000">
            <div class="col-xs-1"> Details </div>

            <!-- Allows the headings of the table to be clicked to sort through rows 
            <!-- TODO: Need to correct the icons located next to the headers
            <!-- Expanded implementation
            <div class="col-xs-1" ng-click="sort_by('bldgCode')"> Code <i class="fa fa-sort"></i></div>
            <div class="col-xs-4 left" ng-click="sort_by('bldgName')"> Name <i class="fa fa-sort"></i></div>
          </div>

          <!-- Creates div element that has uses ng-repeat to iterate through the response.data -->
          <!-- Filters the data with the spotQuery entry and orders it based on the sorting object -->
          <!-- Also calls the showDetails function which pans map, opens popup, and opens expanded menu -->

          <!-- Expanded implementation
          <div id="sidebar-repeat" class="row" ng-repeat-start="spot in spots | filter: spotQuery | orderBy:sortingOrder:reverse"
            ng-click="showDetails(spots.indexOf(spot))" ng-class-odd="'alt'">
           -->
      
          <!-- Creates the table format by pulling the response.data from $scope.spots -->
            <tr id="listingRows" ng-repeat-start="spot in spots | filter: spotQuery as x"
              ng-click="showDetails(spots.indexOf(spot))">

           <!-- The object that displays the disclosure triangle for each row 
            <div class="col-xs-1">
              <a href="">
                <i ng-hide="active==spot.bldgCode" class="fa fa-caret-right fa-2x"></i>
                <i ng-show="active==spot.bldgCode" class="fa fa-caret-down fa-2x"></i>
              </a>
            </div>
           -->
          <!--
            <!-- Parameters for the data that will be in each row 
            <div class="col-xs-1">{{spot.bldgCode}}</div>
            <div class="col-xs-4 left">{{spot.bldgName}}</div>
          </div>
          -->
              <!-- show rooms when triangle points down -->
              <tr ng-repeat="room in spot.spots" ng-show="spot.triangle=='▼'">
                <td> </td>
                <td >{{room}}</td>
                <td ><button class="upvoteButton" ng-click="downvote(spots.indexOf(spot))">◀</button>
                  {{ spot.upvotes }}
                  <button class="upvoteButton" ng-click="upvote(spots.indexOf(spot))">▶</button></td>
              </tr>

              <!-- Show no rooms if rooms are empty-->
              <tr ng-repeat-end ng-show="spot.spots.length == 0 && spot.triangle=='▼'">
                <td> </td>
                <td colspan="4">No rooms</td>
              </tr>

              <!-- if query doesnt find anything -->
              <tr ng-if="x.length ===0">
                <td> </td>
                <td> </td>
                <td>No results found.</td>
              </tr>

            </tr>
          </table>

          <!-- Initialization of the expanded menu object -->
          <!-- Expanded initialization
          <div id="sidebar-expand" class="row" ng-repeat-end="" ng-show="active==spot.bldgCode" ng-class-odd="'alt'">
            <div class="col-xs-12">

              <!-- Heading for the expanded menu 
              <h2 class="cap">{{spot.bldgName}}</h2>
            </div>

            <!-- Creates outline for the submenu of the sidebar when something is clicked
            <div class="col-md-3 col-xs-6 small">
              <label>Building:</label> {{spot.bldgName}}<br>
              <label>Number:</label> {{spot.bldgNum}}<br>
              <label>Code:</label> {{spot.bldgCode}}<br>
              <label>Spots available: </label>

              <!-- Creates buttons based off of the rooms in spot.spots (TODO: implement a way to find which are available)
              <div ng-repeat="room in spot.spots" ng-click="claimSpot(spotDetails.bldgCode, room)"> <button>{{room}}</button></div><br>
              <label>Add spot: </label>

                <!--Creates area for the user to input a new room for a building
                <form novalidate>
                  <th><input type="text" ng-model="bldg.roomName" placeholder="Room Name"></th>
                  <th><button id="addbutton" ng-click="add(spotDetails.bldgCode, bldg.roomName)">Add</button></th>
                </form>
              <br>
            </div>
          </div>
        </div>
        -->
    </div>

    <!-- navigation bar -->
    <div class="row2" id="menu_toggle">
      <button class="openbtn" onclick="toggleMenu()">☰ Menu</button>
      <button id="signup" class="rightbtn" onclick="toggleSignup()">Sign Up</button>
      <button id="login" class="rightbtn" onclick="toggleLogin()">Log In</button>
    </div>



    <!-- creates id in the <p> for the mapbox to load -->
    <p id='map'></p>

    <script type="text/javascript" src="app.js"></script>
    <script type="text/javascript" src="spotFactory.js"></script>
    <script type="text/javascript" src="spotController.js"></script>
    <script type="text/javascript" src="authentController.js"></script>
    <script type="text/javascript" src="index_functions.js"></script>
    <!--  <script type="text/javascript" src="mapbox_functions.js"></script> -->
</body>

</html>
